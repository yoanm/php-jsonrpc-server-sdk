name: 'Coverage upload reusable workflow'

on:
  workflow_call:
    secrets:
      CODACY_PROJECT_TOKEN:
        required: true
      CODECOV_TOKEN:
        required: true

permissions:
  contents: read
  checks: write # For the check run creation !

jobs:
  job:
    name: ".github"
    permissions:
      contents: read
      checks: write # For the check run creation !
    secrets:
      CODACY_PROJECT_TOKEN: ${{ secrets.CODACY_PROJECT_TOKEN }}
      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
    uses: yoanm/.github/.github/workflows/reusable-coverage-upload-manager.yml@feature/init # @TODO - !! Move to a tag before merging !!
    with:
      artifacts-pattern: coverage-groups-*
      with-codacy: true
      with-codecov: true
